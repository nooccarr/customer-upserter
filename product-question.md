Suppose we've released this script to a customer and they're happy with the upsert behavior. However, another customer already has many users uploaded to Customer.io and would rather not have Hightouch insert users. Instead, they only want to update attributes on existing users.

Would the Customer.io API allow this customer use case to be supported? If you arrive at a solution, how hacky would you rate it on a scale of 1 to 10? Are there are any edge cases you would be concerned about? If you think a solution doesn't exist, give some reasons why you think it's not possible.

The 'Add or update a customer' API is used for synchronizing user data from local files to Customer.io. It adds new customer if none of identifier belongs to existing customer or updates existing customer if any identifier belong to a customer. Since we cannot separate this functionality, we need API that checks if an identifier belongs to existing customer. I believe 'Lookup a customer's attributes' API is a good candidate for filtering out customer that doesn't exist in Customer.io. We can implement this by calling 'Lookup a customer's attribute' API on a customer, and then call 'Add or update a customer' API if the customer exists. Although it will take twice as long since we're adding another API call per customer, I wouldn't call this hacky because 'Looking a customer's attrubute' API allows me to check customer identifier with id, email, and cio_id. However, we're making API requests to Beta API for customer lookup and Track API for customer update. If a request to Beta API fails, we can't run Track API until we get a response back from Beta API.
